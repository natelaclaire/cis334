---
layout: default
title: 2.4 Class 2 Reinforcement Exercises
nav_order: 5
---

# 2.4 Class 2 Reinforcement Exercises

Before you begin the Reinforcement Exercises, you'll need to accept the Pull Request that I've submitted for your weekly assignments repository. To do that:

1. Visit the repository URL (not the Codespace) by going to [the weekly assignments GitHub Classroom assignment](https://classroom.github.com/a/-OkpaYCp) and clicking the repository URL (e.g. https://github.com/uma-cis334/weekly-exercises- followed by your GitHub username) instead of the Open in GitHub Codespaces button.
2. Click Pull Requests.
3. Click GitHub Classroom: Sync Assignment #2.
4. Merge Pull Request.
5. Open your Codespace.
6. Click the Source Control tab.
7. Click Pull in order to pull the changes from the pull request into the Codespace.

## Exercise 2-1

In this exercise, you will use OOP to create an online ordering script, similar to exercise 6-5 in CIS 333 but with OOP.

1. Using your Codespace, open `public/exercises/2-1-online-orders.php`.
2. Find the comment in the `Product` class that reads "Additional Properties" and add the following properties below it:

```php
public int $id;
public string $name;
public string $description;
public float $price;
public int $quantityInCart;
```

3. Inside the constructor for the `Product` class, find the comment "Populate additional properties" and use the example of how to populate the `$name` property to populate the `$description`, `$price`, and `$quantityInCart` properties.
4. In the `total()` method, add the following to calculate the total price for the item:

```php
return $this->price * $this->quantityInCart;
```

5. In the `__toString()` method, add the following to display the item's information as a string:

```php
return "{$this->name} x {$this->quantityInCart} @ $" . number_format($this->price,2) . " = $" . number_format($this->total(),2);
```

6. In the `Products` class constructor, find the comment "Add more products as needed" and add at least 4 more products to the array, following the format shown in the first two products to instantiate each of your products as a new `Product` object with a name, description, and price.
7. Find the "Main logic" comment and add the following line to instantiate a new `Products` object and store it in a variable named `$products`:

```php
$products = new Products();
```

8. Find the comment "Update product quantities from POST data" and add the following line to use the `updateQuantities()` method to object the quantity for each item from the data in the POST request:

```php
$products->updateQuantities($_POST);
```

9. Find the comment "Save order details to the file" and paste the following to save the order to a file by generating a string of the `$products` object:

```php
file_put_contents($orderFile, $products);
```

10. Save the file and load it in the browser. Try updating quantities. We're using some JavaScript to update the totals automatically as you make changes - that doesn't involve any PHP. Click "Submit Order" and you should receive a confirmation that the order was saved to a file and you should still see all of the quantities and totals in the table as you did before you submitted. You should also see a summary of the order below the table, which was generated using the `__toString()` method for each `Product` object.
11. Try a few more orders and confirm that each order was saved to the `data` folder.

## Exercise 2-2

In this exercise you will complete the code to create a system for purchasing movie tickets.

1. Using your Codespace, open `public/exercises/2-2-movies.php`.
2. Inside the `Movie` class, use the constructor parameter list to determine the missing class properties and then define them where the "Add missing properties" is, including appropriate data types and visibility modifiers. All should be `public` properties.
3. Inside the `Movie` class constructor, add the missing assignment statements to populate the rest of the properties.
4. Inside the `Movies` class constructor, add 2-3 more movies to the array, following the examples to instantiate new `Movie` objects with the necessary details.
5. Look at the constructor for the `MovieOrder` class. It takes a `Movie` object and an array of quantities. Now, scroll down to the comment "Create order object" and write a line that creates a new object of the `MovieOrder` class and stores it in a variable named `$order`. In the object creation statement, you should pass the `$selectedMovie` and `$quantities` variables to the `MovieOrder` constructor.
6. Save the script and open it in your browser. Go through the process to purchase tickets for at least two movies, confirming that the information gets stored in the `data` folder.

## Exercise 2-3

In this exercise you will use polymorphism to record information about weekly pay for a set of employees, including both hourly and salaried employees.

1. Using your Codespace, open `public/exercises/2-3-employees.php`.
2. At the top, after the comment, paste the following to define the `Payable` interface, which requires that all classes that implement the interface provide their own `getPayAmount()` method that returns a float:

```php
interface Payable {
	public function getPayAmount(): float;
}
```

3. Find the "Populate properties" comment in the `HourlyEmployee` class constructor and paste the following to pass the ID and name to the parent constructor and record the hourly rate and hours worked:

```php
parent::__construct($id, $name);
$this->hourlyRate = $hourlyRate;
$this->hoursWorked = $hoursWorked;
```

4. Inside the `getPayAmount()` method in the `HourlyEmployee` class, add the following to calculate the weekly pay for an hourly employee:

```php
return $this->hourlyRate * $this->hoursWorked;
```

5. Find the "Populate properties" comment in the `SalariedEmployee` class constructor and paste the following to pass the ID and name to the parent constructor and record the annual salary:

```php
parent::__construct($id, $name);
$this->annualSalary = $annualSalary;
```

6. Inside the `getPayAmount()` method in the `SalariedEmployee` class, add the following to calculate the weekly pay for a salary employee:

```php
return $this->annualSalary / 52; // Weekly pay
```

7. Find the comment "Determine type using instanceof" and paste the following to use the subclass to identify if the employee is salaried or hourly:

```php
if ($emp instanceof HourlyEmployee) {
    echo 'Hourly';
} else {
    echo 'Salaried';
}
```

8. Open the page in your browser and confirm that 4 sample employees appear and that the correct weekly pay calculations appear.

## Exercise 2-4

In this exercise, you will practice polymorphism in PHP by creating a parent class `MediaItem` and multiple child classes (`Movie`, `TVShow`, `Book`, `Magazine`), using the `__toString()` magic method so each object can describe itself when echoed.

1. Using your Codespace, open `public/exercises/2-4-media-library.php`.
2. Define a `MediaItem` parent class with:
     * A protected property `$title`
     * A constructor to set the title
     * A placeholder `__toString()` method that can be overridden
     * A method called `getType()` that returns "Media Item"
3. Create subclasses:
   * `Movie`, `TVShow`, `Book`, and `Magazine` will extend `MediaItem`.
   * Each subclass should have at least one unique property (e.g., director for a movie, author for a book).
   * Each subclass should have a constructor that has parameters for the unique property and the title, stores the unique property, and calls `parent::__construct($title)`.
   * Override the `__toString()` method in each subclass to display the item in a string format.
   * Each class should override the `getType()` method and return the correct type ("Movie", "TV Show", "Book", "Magazine").
4. Build an array of items that mixes different types of media (`Movie`, `TVShow`, `Book`, `Magazine`).
5. Loop through the array with `foreach` and echo each item along with the result of calling `getType()` on the item. PHP will automatically call the `__toString()` method for each object. For example:

```php
foreach ($library as $item) {
    echo "<li><strong>{$item->getType()}:</strong> {$item}</li>";
}
```

If the `$library` is:

```php
$library = [
    new Movie("Inception", "Christopher Nolan"),
    new TVShow("Stranger Things", 4),
    new Book("1984", "George Orwell"),
    new Magazine("National Geographic", 202)
];
```

Then the `foreach` might display:

* **Movie:** Inception (Director: Christopher Nolan)
* **TV Show:** Stranger Things (4 seasons)
* **Book:** 1984 by George Orwell
* **Magazine:** National Geographic, Issue #202

## Exercise 2-5

In this exercise, you'll practice encapsulation by completing a `Contact` class, making all class properties private and controlling access through public **getter** and **setter** methods (**accessors** and **mutators**). Implement simple **data formatting** or **validation** inside those methods.

You are building a system to manage a **Contact** (like in an address book). A `Contact` has the following private properties:

* `$firstName`
* `$lastName`
* `$email`
* `$phone`

Note: the `Contact` has a method to return the full name, but there is no property for the full name.

Using your Codespace, open `public/exercises/2-5-contacts.php`. All of your changes should be within the `Contact` class - no changes are needed outside of the class!

### Requirements

1. **Implements `ContactRecord`**
   * Your `Contact` class must implement the `ContactRecord` interface and override all required methods, fulfilling the contract defined in the interface.
2. **Encapsulation**
   * All properties must be private.
   * Public setters must validate or format the data before saving it.
   * Public getters must return nicely formatted values.
3. **Validation & Formatting**
   * **Names:** Capitalize the first letter and lowercase the rest of each name (e.g., “jane”, "JANE", or "jAnE" all result in “Jane”).
   * **Email:** Must contain `@` or it should not record the value.
   * **Phone:** Strip out non-numeric characters in the setter but format it as `(xxx) xxx-xxxx` when retrieved by the getter. You might use regular expressions, the `sprintf()` function, and/or other method(s) - it's up to you!
4. **Testing**
   * The two test `Contact` objects provided include messy input.
   * The test code should return nicely formatted output:
     * John Smith – [john@email.com](mailto:john@email.com) – (123) 456-7890
     * Jane Doe – [jane.doe@example.com](mailto:jane.doe@example.com) – (987) 654-3210
