---
layout: default
title: 15.3 Factory Pattern
nav_order: 3
---

# 15.3 Factory Pattern

Next up is the [**Factory pattern**](https://medium.com/@bluznierca1/exploring-the-factory-pattern-in-php-8-2-d75f2de6f22e). A factory creates objects for you. Instead of using `new` everywhere, you centralize how objects are built. This is useful when the creation steps vary or when you want consistent initialization. The code that calls the factory doesnâ€™t need to know the details. In fact, generally it expects a certain interface or base class and the factory provides a subclass that meets the needs.

```php
<?php
abstract class User {
    abstract protected string $role;
    public function __construct(public string $name) {}
    public function getInfo(): string {
        return "Name: {$this->name}, Role: {$this->role}";
    }
    abstract public function getPermissions(): array;
}

class AdminUser extends User {
    protected string $role = "admin";
    public function __construct() {
        parent::__construct("Admin User");
    }
    public function getPermissions(): array {
        return ['create', 'read', 'update', 'delete'];
    }
}

class GuestUser extends User {
    protected string $role = "guest";
    public function __construct() {
        parent::__construct("Guest User");
    }
    public function getPermissions(): array {
        return ['read'];
    }
}

class StandardUser extends User {
    protected string $role = "standard";
    public function __construct() {
        parent::__construct("Standard User");
    }
    public function getPermissions(): array {
        return ['read', 'update'];
    }
}

class UserFactory {
    public static function create(string $type): User {
        return match($type) {
            'admin' => new AdminUser(),
            'guest' => new GuestUser(),
            'standard' => new StandardUser(),
            default => throw new InvalidArgumentException("Unknown user type: $type"),
        };
    }
}

$admin = UserFactory::create('admin');
echo $admin->getInfo(); // Name: Admin User, Role: admin
print_r($admin->getPermissions()); // ['create', 'read', 'update', 'delete']
```

This pattern cleans up your codebase by moving object-creation logic into one place. It also makes testing easier because you can swap factories without touching the rest of your application.
